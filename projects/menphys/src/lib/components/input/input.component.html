<div
  class="input-container"
  [class.required]="required"
  [class.disabled]="disabled"
>
  <label
    *ngIf="label && shouldShowLabel"
    [for]="label"
  >{{label}}</label>
  <ng-container *ngTemplateOutlet="inputsRef"></ng-container>
</div>

<ng-template #inputsRef>
  <ng-container [ngSwitch]="type">
    <ng-container *ngSwitchCase="types.search">
      <menphys-input-search
        [righticon]="righticon || {name: 'search', size: 30}"
        [lefticon]="lefticon"
        [accept]="accept"
        [formControl]="control"
        [autocomplete]="autocomplete"
        [autocorrect]="autocorrect"
        [autofocus]="autofocus"
        [checked]="checked"
        [incremental]="incremental"
        [max]="max"
        [maxlength]="maxlength"
        [min]="min"
        [attr.minlength]="minlength"
        [multiple]="multiple"
        [name]="name"
        [pattern]="pattern"
        [type]="type === 'search' ? types.text : type"
        [placeholder]="placeholder"
        (onBlur)="onBlur.emit($event)"
        (onClick)="onClick.emit($event)"
        (onCopy)="onCopy.emit($event)"
        (onCut)="onCut.emit($event)"
        (onFocus)="onFocus.emit($event)"
        (onKeyDown)="onKeyDown.emit($event)"
        (onKeyUp)="onKeyUp.emit($event)"
        (onPaste)="onPaste.emit($event)"
      />
    </ng-container>
    <ng-container *ngSwitchCase="types.checkbox">
      <div class="check">
        <menphys-checkbox
          [label]="label"
          [required]="required"
        />
      </div>
    </ng-container>
    <ng-container *ngSwitchCase="types.date">
      <menphys-date
        [righticon]="righticon"
        [lefticon]="lefticon"
        [accept]="accept"
        [formControl]="control"
        [autocomplete]="autocomplete"
        [autocorrect]="autocorrect"
        [autofocus]="autofocus"
        [checked]="checked"
        [incremental]="incremental"
        [max]="max"
        [maxlength]="maxlength"
        [min]="min"
        [attr.minlength]="minlength"
        [multiple]="multiple"
        [name]="name"
        [pattern]="pattern"
        [type]="type"
        [placeholder]="placeholder"
        (onBlur)="onBlur.emit($event)"
        (onClick)="onClick.emit($event)"
        (onCopy)="onCopy.emit($event)"
        (onCut)="onCut.emit($event)"
        (onFocus)="onFocus.emit($event)"
        (onKeyDown)="onKeyDown.emit($event)"
        (onKeyUp)="onKeyUp.emit($event)"
        (onPaste)="onPaste.emit($event)"
      />
    </ng-container>
    <ng-container *ngSwitchDefault>
      <ng-container *ngTemplateOutlet="inputRef"></ng-container>
    </ng-container>
  </ng-container>
</ng-template>
<ng-template #inputRef>
  <div
    class="input-wrapper"
    [style]="rightIcon ? '--right-icon-size: ' +  (rightIcon.size || 18) + 'px' : null"
  >
    <menphys-icon
      *ngIf="rightIcon"
      [name]="rightIcon.name"
      [color]="rightIcon.color"
      [size]="rightIcon.size || 18"
      (click)="inputHTMLElement.focus()"
    />
    <input
      #inputHTMLElement
      [accept]="accept"
      [autocomplete]="autocomplete"
      [attr.autocorrect]="autocorrect"
      [autofocus]="autofocus"
      [checked]="checked"
      [disabled]="disabled"
      [incremental]="incremental"
      [max]="max"
      [attr.maxlength]="maxlength"
      [min]="min"
      [attr.minlength]="minlength"
      [multiple]="multiple"
      [name]="name"
      [(ngModel)]="value"
      [pattern]="pattern"
      [type]="type"
      [placeholder]="placeholder"
      (blur)="onBlur.emit($event)"
      (click)="onClick.emit($event)"
      (copy)="onCopy.emit($event)"
      (cut)="onCut.emit($event)"
      (focus)="onFocus.emit($event)"
      (keydown)="onKeyDown.emit($event)"
      (keyup)="onKeyUp.emit($event)"
      (paste)="onPaste.emit($event)"
    />
    <span></span>
  </div>
</ng-template>
